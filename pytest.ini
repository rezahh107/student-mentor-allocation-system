[pytest]
# خروجی کوتاه و سازگار با CI (بدون وابستگی به پلاگین‌ها)
addopts = -q

# فقط سویت‌های گِیتینگ کشف شوند
testpaths =
    tests/gates
    tests/middleware
    tests/docs
    tests/probes
    tests/windows

# الگوی نام‌گذاری تست‌ها
python_files = test_*.py *_test.py
python_classes = Test* *Tests
python_functions = test_*

# مارکرهای لازم (فقط همین‌ها را ثبت کن)
markers =
    smoke: quick smoke checks
    integration: integration tests
    perf: performance-related tests
    performance: deterministic performance harness enforcing budgets
    benchmark: benchmark-style performance sampling
    windows: windows-specific tests
    windows_only: mark tests that require a Windows environment
    timeout: registered by pytest-timeout for deterministic timeouts
    linux: linux-specific tests
    middleware: middleware-focused diagnostics
    ci: continuous integration gating tests

# هشدارها خطا شوند تا نویز نداشته باشیم
filterwarnings =
    error

# مسیرهایی که نباید پیمایش شوند
norecursedirs =
    .git
    .tox
    .venv
    venv
    build
    dist
    node_modules
    tmp
    htmlcov
    test-results
    System?Volume?Information
    Program?Files*
    Program?Files?(*
    WindowsApps

# استایل خروجی ترمینال
console_output_style = progress
