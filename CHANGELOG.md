# Changelog

## Unreleased

- سخت‌سازی درگاه پوشش legacy با برش جریان لاگ، هشدارهای `COV_INVALID_INPUT_CLAMPED`، خلاصهٔ تک‌خطی فارسی و fallback مبتنی بر `coverage.xml`.
- افزودن ماتریس CI برای شبیه‌سازی نبود `pytest-cov` و اطمینان از پیام `❌ PYTEST_COV_MISSING`.
- مستندسازی متغیرهای جدید (`COV_MIN_PERCENT`، `COV_TAIL_LINES`، `COV_CAPTURE_CHAR_LIMIT`) و افزودن تست‌های یکپارچه/واحد برای پارسر پوشش.
- افزودن نگهبان بازگردانی محدودیت نرخ و پاک‌سازی رجیستری Prometheus در آزمون‌های فاز ۵؛ شکست صریح در صورت نشت وضعیت جهانی و به‌روزرسانی مستندات قرارداد آزمون‌ها.
- مهاجرت پیکربندی pytest به `asyncio_mode=auto` با حذف کامل `asyncio_default_fixture_loop_scope`، به‌روزرسانی پلاگین‌های سازگاری و افزودن آزمون‌های نگهبان برای اخطارهای Pytest-Asyncio و HTTPX.
- لانچر Redis اکنون در نبود باینری محلی به‌طور خودکار از Docker استفاده می‌کند و در صورت فقدان کامل سرویس با `REDIS_LAUNCH_MODE=skip` آزمون‌ها را به صورت مستند xfail می‌کند؛ نگهبان اخطارهای HTTPX نیز مسیرهای GET و خطا را پوشش می‌دهد تا صفر هشدار تضمین شود.
