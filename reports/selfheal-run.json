[
  {
    "timestamp": "2025-10-28T20:38:56.991438+00:00",
    "correlation_id": "6dda43e3-c56c-4011-9b14-c8840c184801",
    "level": "ERROR",
    "stage": "Preflight",
    "message": "python3.11 executable not found",
    "action": "Detected missing Python 3.11 interpreter during version check",
    "details": {
      "command": "python3.11 --version",
      "stderr": "pyenv: python3.11: command not found"
    }
  },
  {
    "timestamp": "2025-10-28T20:39:32.530927+00:00",
    "correlation_id": "66db5b2f-04b2-40c7-9317-af33b55cb19e",
    "level": "ERROR",
    "stage": "ENV",
    "message": "Failed to import AppConfig due to missing package",
    "action": "Attempted to instantiate AppConfig to validate environment",
    "details": {
      "command": "python -c 'from sma.phase6_import_to_sabt.app.config import AppConfig; print(AppConfig())'",
      "stderr": "ModuleNotFoundError: No module named 'sma'"
    }
  },
  {
    "timestamp": "2025-10-28T20:39:58.496681+00:00",
    "correlation_id": "fcc53776-531d-4485-9ef2-6c3e4488cc3c",
    "level": "ERROR",
    "stage": "ENV",
    "message": "AppConfig validation failed due to missing nested sections",
    "action": "Instantiated AppConfig after installing project dependencies",
    "details": {
      "command": "python -c 'from sma.phase6_import_to_sabt.app.config import AppConfig; print(AppConfig().model_dump())'",
      "stderr": "ValidationError: redis/database/auth fields required"
    }
  },
  {
    "timestamp": "2025-10-28T20:40:15.400273+00:00",
    "correlation_id": "6082adb5-7683-4e32-8ea8-af4abb33882f",
    "level": "ERROR",
    "stage": "ENV",
    "message": "AppConfig validation still missing required sections",
    "action": "Retried AppConfig instantiation after exporting env vars",
    "details": {
      "command": "python -c 'from sma.phase6_import_to_sabt.app.config import AppConfig; print(AppConfig().model_dump())'",
      "stderr": "ValidationError: redis/database/auth fields required"
    }
  },
  {
    "timestamp": "2025-10-28T20:40:26.682782+00:00",
    "correlation_id": "a53e57b5-2572-4ec5-893f-5c199214cf6c",
    "level": "INFO",
    "stage": "ENV",
    "message": "AppConfig loaded successfully",
    "action": "Validated AppConfig after correcting environment variable names",
    "details": {
      "config_keys": [
        "redis",
        "database",
        "auth",
        "ratelimit",
        "observability"
      ]
    }
  },
  {
    "timestamp": "2025-10-28T20:40:41.611004+00:00",
    "correlation_id": "2e1824ed-438e-4cc8-8876-0113836250fa",
    "level": "ERROR",
    "stage": "Run",
    "message": "uvicorn failed: missing jinja2 dependency",
    "action": "Started uvicorn with create_application factory",
    "details": {
      "stderr": "AssertionError: jinja2 must be installed to use Jinja2Templates",
      "port": 8000
    }
  },
  {
    "timestamp": "2025-10-28T20:40:49.298859+00:00",
    "correlation_id": "98efaff6-3c51-441d-9f65-34739c86ab82",
    "level": "INFO",
    "stage": "Run",
    "message": "Installed missing jinja2 dependency",
    "action": "pip install jinja2 to satisfy template rendering",
    "details": {
      "packages": [
        "jinja2",
        "MarkupSafe"
      ]
    }
  },
  {
    "timestamp": "2025-10-28T20:41:06.651243+00:00",
    "correlation_id": "c385c3aa-ba22-4607-960f-4ae9e67bd54a",
    "level": "ERROR",
    "stage": "Probe",
    "message": "Health endpoint returned 401",
    "action": "Requested /health without auth",
    "details": {
      "status_code": 401,
      "response": "درخواست نامعتبر است؛ احراز هویت انجام نشد.",
      "headers": {
        "Authorization": null
      }
    }
  },
  {
    "timestamp": "2025-10-28T20:41:18.496589+00:00",
    "correlation_id": "14db97ea-8f22-4d83-9409-c8952d89852a",
    "level": "INFO",
    "stage": "Probe",
    "message": "Healthz endpoint returned 200",
    "action": "Requested /healthz",
    "details": {
      "status_code": 200
    }
  },
  {
    "timestamp": "2025-10-28T20:41:26.093203+00:00",
    "correlation_id": "ec4282f4-f7c7-4ce2-b944-fde0eba06277",
    "level": "ERROR",
    "stage": "Probe",
    "message": "Docs endpoint returned 401",
    "action": "Requested /docs without auth",
    "details": {
      "status_code": 401
    }
  },
  {
    "timestamp": "2025-10-28T20:41:40.948763+00:00",
    "correlation_id": "9dc17711-66d5-4a68-9bc4-4ce4362c4f9a",
    "level": "INFO",
    "stage": "ENV",
    "message": "Enabled public docs for development",
    "action": "Set IMPORT_TO_SABT_SECURITY__PUBLIC_DOCS=true",
    "details": {
      "env_var": "IMPORT_TO_SABT_SECURITY__PUBLIC_DOCS"
    }
  },
  {
    "timestamp": "2025-10-28T20:42:00.476261+00:00",
    "correlation_id": "65c63355-3f81-4f01-b114-2a3fbe92ac0a",
    "level": "INFO",
    "stage": "Probe",
    "message": "Docs endpoint accessible",
    "action": "Requested /docs after enabling public docs",
    "details": {
      "status_code": 200
    }
  },
  {
    "timestamp": "2025-10-28T20:42:04.480003+00:00",
    "correlation_id": "0ab09e79-b5fe-4e1f-927a-687f33feb8be",
    "level": "INFO",
    "stage": "Probe",
    "message": "Metrics without token rejected",
    "action": "Requested /metrics without Authorization header",
    "details": {
      "status_code": 403
    }
  },
  {
    "timestamp": "2025-10-28T20:42:04.480032+00:00",
    "correlation_id": "6d7047bd-9901-4e73-a003-d714dc018adf",
    "level": "INFO",
    "stage": "Probe",
    "message": "Metrics accessible with token",
    "action": "Requested /metrics with Authorization header",
    "details": {
      "status_code": 200
    }
  }
]