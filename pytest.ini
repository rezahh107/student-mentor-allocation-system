[pytest]
addopts = -q -W error
pythonpath = src .
testpaths = tests
required_plugins =
env =
    TZ=Asia/Tehran
python_files =
    test_asgi_retry.py
    test_retry_metrics.py
    test_xlsx_excel_safety.py
    test_atomic_finalize.py
    test_csv_golden.py
    test_streaming_large.py
    test_export_streaming_memory.py
    test_state_hygiene.py
    test_no_warnings_gate.py
    test_no_skips_gate.py
    test_full_suite.py
    test_middleware_order_all_apps.py
    test_metrics_protection_all_apps.py
    test_counter_rules.py
    test_cross_layer_consistency.py
    test_mobile_normalization.py
    test_clock_injection.py
    test_fairness_distribution.py
    test_fairness_determinism.py
    test_reason_codes.py
    test_allocation_service_payloads.py
asyncio_default_fixture_loop_scope = function
markers =
    smoke: آزمون‌های دود که سلامت پایه را بررسی می‌کنند.
    e2e: آزمون‌های انتهابه‌انتها برای مسیرهای بحرانی.
    golden: آزمون‌های مقایسهٔ دقیق فایل‌های طلایی.
    integration: آزمایش‌های یکپارچه‌سازی سامانه تخصیص.
    performance: آزمایش‌های کارایی و بنچمارک.
    security: آزمایش‌های امنیتی و بررسی RBAC.
    observability: آزمون‌های مرتبط با لاگ و متریک.
    realtime: آزمون‌های به‌روزرسانی لحظه‌ای.
    concurrent: آزمون‌های همزمانی و رقابت منابع.
    slow: آزمون‌های کند که در چرخهٔ کامل اجرا می‌شوند.
    resources: آزمون‌هایی که مصرف منابع را می‌سنجند.
    stress: آزمون‌های تنش و حجم بالا.
    asyncio: آزمون‌های مبتنی بر حلقهٔ رویداد asyncio.
    ui: آزمون‌های رابط کاربری Qt و مسیرهای دیداری.
filterwarnings = error
